<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Chordr Web</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="icon" href="assets/images/logo-32-light.png">
    <link rel="apple-touch-icon" href="assets/images/logo-120.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="viewport" content="width=device-width">
    <style>.reload-button-fallback {
        text-align: center;
        display: block;
        width: 100%;
    }

    .reload-button-fallback[aria-disabled] {
        display: none;
    }</style>


    <script src="/assets/libraries/clipboard.min.js"></script>
    <script src="/assets/libraries/Sortable.min.js"></script>

    <link rel="stylesheet" href="/stylesheets/chordr-default-styles.css?1583601942"/>
    <link rel="stylesheet" href="/stylesheets/chordr-app.css?1583601942"/>
</head>
<body>
<script src="/webchordr.js"></script>
<script src="/setup.js"></script>

<a id="reload-button-fallback" class="reload-button reload-button-fallback" aria-disabled="true" href="/"
   title="Reload the song catalog">
    <i class="im im-sync"></i>
    <span>Reload the catalog</span>
</a>

<script>
    if (window.location.hostname === 'localhost') {
        console.info('INFO:webchordr -- Service Worker is not used on localhost');
    } else if ('serviceWorker' in navigator) {
        navigator.serviceWorker
            .register('/sw.js')
            .then(function () {
                console.log('INFO:webchordr -- Service Worker registered');
            }).catch(function (e) {
                console.error('ERROR:webchordr -- Service Worker could not be registered', e);
            }
        );
    } else {
        console.error('ERROR:webchordr -- Service Worker not supported');
    }

    setTimeout(function () {
        /* If the fallback reload button has not been removed after 4 seconds show it */
        /** @type {HTMLLinkElement|HTMLElement} */
        const fallback = document.getElementById('reload-button-fallback');
        if (fallback) {
            fallback.href += '?' + (+ new Date());
            fallback.setAttribute('aria-disabled', 'false')
        }
    }, 4000)
</script>
</body>
</html>
